<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kjnresort.mapper.CondoReserveMapper">

<insert id="insert">
insert into t_condo_reserve values(seq_t_condo_reserve.nextval,#{id},#{roomType},#{reserveDate},#{status},#{roomNo},#{checkIn},#{checkOut},#{nights},#{price},#{review})
</insert>

<select id="read" resultType="com.kjnresort.domain.CondoReserveVO">
select * from t_condo_reserve where reserveno=#{reserveNo}
</select>

<select id="getMaxRoomNoByRoomType" resultType="int">
select max(roomno)
from view_condo_reserve
where roomType=#{roomType}
</select>


<select id="getOverlapDateCount" resultType="int">
<![CDATA[
select count(*)
from view_condo_reserve
where ((checkin<=#{checkIn} and #{checkIn} < checkout) or (checkin<#{checkIn} and #{checkIn}<=checkout))
and roomno=#{roomNo} and roomtype=#{roomType}
]]>
</select>



<update id="update">
update t_condo_reserve status=#{status} where reserveno=#{reserveNo}
</update>


</mapper>